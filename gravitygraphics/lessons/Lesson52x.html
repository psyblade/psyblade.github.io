<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"> 
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'>
<link href="../css/lessons.css" rel="stylesheet">
<script src="../lib/JQuery/jquery-3.6.0.min.js"></script>
<script src="../js/lessons.js"></script>
</head>
<body>
<div id="lesson" class="lesson">
	<h1>Exercise: Healthbar, Functions and Parameters</h1>
	<p>Ask the user what options do they want to do damage and then ask them for how much damage they want to do.</p>
	<p>Also change the name of your functions accordingly to reflect a more general name:</p>
<pre>
take50percentDamage() -> takePercentDamage()
take5hitpointDamage() -> takeHitpointDamage()
</pre>
<pre>
print ("Option 1: Take percentage damage.");
print ("Option 2: Take hitpoints damage.");
print ("Option 3: Reset.");
</pre>
	<h3></h3>
	<div id="buttons">
		<button class="buttonPreviousLesson" onclick="NavigateTo('Lesson52');">Lesson 52</button>
		<button class="buttonNextLesson" onclick="NavigateTo('Lesson53');">Lesson 53</button>
	</div>
</div>

<textarea id="LessonRunCode">
const bar_length = 53-5;
const health_max = 100;
var health_now = 100;
var health_bar = (bar_length * (health_now/100));
start();

function start() {
	resetHealthBar();
	printOptions();
}
	
function printOptions() {
	print ("Option 1: Take percentage damage.");
	print ("Option 2: Take hitpoints damage.");
	print ("Option 3: Reset.");
}

function updateBar() {
	gr();
	rect(5, 14, 54, 24, "lime");
	rect(6, 15, 53, 23, "green");
	rect(6, 15, 5 + health_bar, 23, "cyan");
	home();
	text ("Health:" + health_now, "black", "center", 18);
}

function takePercentDamage(amount) {
	health_now = parseInt(health_now * ((100-amount)/100));
	if (health_now < 0) health_now = 0;
	health_bar = (bar_length * (health_now/health_max));
	updateBar();
}

function takeHitpointDamage(amount) {
	health_now = parseInt(health_now - amount);
	if (health_now < 0) health_now = 0;
	health_bar = (bar_length * (health_now/health_max));
	updateBar();
}

function resetHealthBar() {
	health_now = 100;
	health_bar = (bar_length * (health_now/health_max));
	updateBar();
}

while (true) {
	var choice = await input ("Select 1:[%Dam] 2:[HP Dam] 3:[Reset]:");
	if (choice == 1) {
		var amount = await input ("How much percentage damage do you want to do (1-100):");
		takePercentDamage(amount);
	} else if (choice == 2) {
		var amount = await input ("How much hitpoint damage do you want to do (1-100):");
		takeHitpointDamage(amount);
	} else {
		resetHealthBar();
	}
}

</textarea>
<textarea id="LessonExampleCode">
const bar_length = 53-5;
const health_max = 100;
var health_now = 100;
var health_bar = (bar_length * (health_now/100));
start();

function start() {
	resetHealthBar();
	printOptions();
}
	
function printOptions() {
	print ("Option 1: Take percentage damage.");
	print ("Option 2: Take hitpoints damage.");
	print ("Option 3: Reset.");
}

function updateBar() {
	gr();
	rect(5, 14, 54, 24, "lime");
	rect(6, 15, 53, 23, "green");
	rect(6, 15, 5 + health_bar, 23, "cyan");
	home();
	text ("Health:" + health_now, "black", "center", 18);
}

function takePercentDamage(amount) {
	health_now = parseInt(health_now * ((100-amount)/100));
	if (health_now < 0) health_now = 0;
	health_bar = (bar_length * (health_now/health_max));
	updateBar();
}

function takeHitpointDamage(amount) {
	health_now = parseInt(health_now - amount);
	if (health_now < 0) health_now = 0;
	health_bar = (bar_length * (health_now/health_max));
	updateBar();
}

function resetHealthBar() {
	health_now = 100;
	health_bar = (bar_length * (health_now/health_max));
	updateBar();
}

while (true) {
	var choice = await input ("Select 1:[%Dam] 2:[HP Dam] 3:[Reset]:");
	if (choice == 1) {
		var amount = await input ("How much percentage damage do you want to do (1-100):");
		takePercentDamage(amount);
	} else if (choice == 2) {
		var amount = await input ("How much hitpoint damage do you want to do (1-100):");
		takeHitpointDamage(amount);
	} else {
		resetHealthBar();
	}
}

</textarea>
<script>
parent.ShowExample();
parent.LoadYourCode("TextAreaYourCode", "Lesson52x");
parent.HideHelper();
parent.HideHelperButton();
parent.HideSolution();
</script>
</body>
</html>